webpackJsonp([1],{GrC2:function(e,t){},Ln9I:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW"),a=n("Dd8w"),r=n.n(a),s=n("NYxO"),i={name:"App",created:function(){this.$store.dispatch("tryLoggedIn")},computed:r()({},Object(s.b)(["isLoggedIn"])),methods:r()({},Object(s.a)(["login","logout","tryLoggedIn"]))},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"app"}},[n("v-navigation-drawer",{attrs:{app:""}}),e._v(" "),n("v-toolbar",{attrs:{app:""}},[n("router-link",{directives:[{name:"show",rawName:"v-show",value:!e.isLoggedIn,expression:"!isLoggedIn"}],attrs:{to:{name:"Login"}}},[e._v("ログイン")]),e._v(" "),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.isLoggedIn,expression:"isLoggedIn"}],on:{click:e.logout}},[e._v("ログアウト")])],1),e._v(" "),n("v-content",[n("v-container",{attrs:{fluid:""}},[n("router-view")],1)],1),e._v(" "),n("v-footer",{attrs:{app:""}})],1)},staticRenderFns:[]};var d=n("VU/8")(i,l,!1,function(e){n("xaVL")},null,null).exports,u=n("/ocq"),c={name:"HeadComp",methods:r()({},Object(s.a)({showModal:"showModal"}))},v={render:function(){var e=this.$createElement,t=this._self._c||e;return t("header",[t("nav",[t("router-link",{attrs:{to:"/"}},[this._v("トップ")]),this._v(" "),t("span",{on:{click:this.showModal}},[this._v("ログイン")])],1)])},staticRenderFns:[]};var f=n("VU/8")(c,v,!1,function(e){n("iXbY")},"data-v-103f5c50",null).exports,h={name:"Modal",data:function(){return{valid:!1,username:null,password:null,showPassword:!1,nonFieldErrors:[],usernameRules:[function(e){return!!e||"ログインIDを入力してください"}],passwordRules:[function(e){return!!e||"パスワードを入力してください"}]}},methods:r()({},Object(s.a)(["login","hideModal"]),{submit:function(){var e=this;this.nonFieldErrors=[],this.login([this.username,this.password]).then(function(t){e.$router.push("/dashboard")}).catch(function(t){console.log(t.response),e.nonFieldErrors=t.response.data.nonFieldErrors})}})},p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"modal"}},[n("div",{staticClass:"modal-mask"},[n("div",{staticClass:"modal-wrapper"},[n("div",{staticClass:"modal-container"},[n("h2",{staticClass:"modal-title"},[e._v("\n          ログイン\n        ")]),e._v(" "),n("v-alert",{attrs:{value:e.nonFieldErrors.length,type:"error"}},e._l(e.nonFieldErrors,function(t){return n("div",{key:t},[e._v(e._s(t))])}),0),e._v(" "),n("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{label:"ログインID",rules:e.usernameRules,required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),n("v-text-field",{attrs:{label:"パスワード","append-icon":e.showPassword?"visibility":"visibility_off","append-icon-cb":function(){return e.showPassword=!e.showPassword},type:e.showPassword?"text":"password",rules:e.passwordRules,required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),n("v-btn",{attrs:{disabled:!e.valid},on:{click:e.submit}},[e._v("ログイン")]),e._v(" "),n("v-btn",{on:{click:e.hideModal}},[e._v("閉じる")])],1)],1)])])])},staticRenderFns:[]};var m={name:"Top",components:{HeadComp:f,LoginModal:n("VU/8")(h,p,!1,function(e){n("OjSP")},"data-v-10fb102f",null).exports},computed:r()({},Object(s.b)({isShowModal:"getShowModal"}))},g={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("head-comp")],1)},staticRenderFns:[]};var w=n("VU/8")(m,g,!1,function(e){n("fB2F")},"data-v-e28aabe0",null).exports,_=n("mtWM"),b=n.n(_),L={name:"Login",data:function(){return{valid:!1,username:null,password:null,showPassword:!1,nonFieldErrors:[],usernameRules:[function(e){return!!e||"ログインIDを入力してください"}],passwordRules:[function(e){return!!e||"パスワードを入力してください"}]}},methods:r()({},Object(s.a)(["login","hideModal"]),{submit:function(){var e=this;this.nonFieldErrors=[],this.login([this.username,this.password]).then(function(t){e.$router.push("/dashboard")},function(t){e.nonFieldErrors=t.response.data.nonFieldErrors})},loginTwitter:function(){b.a.get("http://localhost:8000/accounts/twitter/login/").then(function(e){console.log(e)})}})},I={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",{staticClass:"modal-title"},[e._v("\n    ログイン\n  ")]),e._v(" "),n("v-alert",{attrs:{value:e.nonFieldErrors.length,type:"error"}},e._l(e.nonFieldErrors,function(t){return n("div",{key:t},[e._v(e._s(t))])}),0),e._v(" "),n("button",{on:{click:e.loginTwitter}},[e._v("Twitterでログイン")]),e._v(" "),n("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{label:"ログインID",rules:e.usernameRules,required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),n("v-text-field",{attrs:{label:"パスワード","append-icon":e.showPassword?"visibility":"visibility_off","append-icon-cb":function(){return e.showPassword=!e.showPassword},type:e.showPassword?"text":"password",rules:e.passwordRules,required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),n("v-btn",{attrs:{disabled:!e.valid},on:{click:e.submit}},[e._v("ログイン")])],1)],1)},staticRenderFns:[]};var x=n("VU/8")(L,I,!1,function(e){n("GrC2")},"data-v-56e35433",null).exports,k={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n  "+this._s(this.msg)+"\n")])},staticRenderFns:[]};var E=n("VU/8")({name:"DashBoard",data:function(){return{msg:"HELLO WORLD"}}},k,!1,function(e){n("Ln9I")},"data-v-01c82684",null).exports;o.default.use(u.a);var F,y=new u.a({routes:[{path:"/",name:"Top",component:w},{path:"/login",name:"Login",component:x},{path:"/dashboard",name:"DashBoard",component:E}]}),M=n("3EgV"),R=n.n(M),O=n("d7EF"),P=n.n(O),S=n("uUlv"),j=b.a.create({baseURL:"http://localhost:8000/"});j.auth=(F=j,{login:function(e,t){var n={username:e,password:t};return F.post("auth/",n)},verify:function(e){return F.post("auth/verify/",{token:e})}}),j.install=function(e){Object.defineProperty(e.prototype,"$request",{get:function(){return j}})};var $=j;o.default.use(S.a);var C=new S.a.Store({state:{isLoggedIn:!1,isShowModal:!1},mutations:{loggedIn:function(e,t){e.isLoggedIn=!0,$.defaults.headers.common.Authorization="JWT "+t,localStorage.setItem("token",t)},loggedOut:function(e){e.isLoggedIn=!1,delete $.defaults.headers.common.Authorization,localStorage.clear()},show:function(e){e.isShowModal=!0},hide:function(e){e.isShowModal=!1}},actions:{login:function(e,t){var n=e.commit,o=P()(t,2),a=o[0],r=o[1];return $.auth.login(a,r).then(function(e){return n("loggedIn",e.data.token),e})},logout:function(e){(0,e.commit)("loggedOut")},showModal:function(e){(0,e.commit)("show")},hideModal:function(e){(0,e.commit)("hide")},tryLoggedIn:function(e){var t=e.commit,n=localStorage.getItem("token");n&&$.auth.verify(n).then(function(){t("loggedIn",n)},function(){localStorage.clear()})}},getters:{isLoggedIn:function(e){return e.isLoggedIn},getShowModal:function(e){return e.isShowModal}}});o.default.config.productionTip=!1,o.default.use(R.a),o.default.use($),new o.default({el:"#app",store:C,router:y,components:{App:d},template:"<App/>"})},OjSP:function(e,t){},fB2F:function(e,t){},iXbY:function(e,t){},xaVL:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.fafdf87a9c5e3c09e4b7.js.map